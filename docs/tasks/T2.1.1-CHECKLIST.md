# Task T2.1.1: Create Discord Application - Checklist

**Epic:** 2 - Discord OAuth Authentication
**Story Points:** 1
**Time Estimate:** 1 hour
**Status:** In Progress

## Overview

Set up a Discord Application for OAuth authentication. This allows users to "Login with Discord" without passwords.

**⚠️ Note:** This is OAuth only (not a Discord bot). The bot setup happens in Phase 3 (Epic 10).

---

## Acceptance Criteria

- [ ] Discord application created at discord.com/developers
- [ ] Client ID obtained and stored in Rails credentials
- [ ] Client Secret obtained and stored in Rails credentials
- [ ] OAuth2 redirect URIs configured for development
- [ ] Credentials test passes

---

## Step-by-Step Checklist

### 1. Create Discord Application

- [ ] Visit https://discord.com/developers/applications
- [ ] Click "New Application"
- [ ] Name: `GuildHub Dev` (for development)
- [ ] Save general information

**Time:** 10 minutes

### 2. Configure OAuth2

- [ ] Go to OAuth2 → General
- [ ] Copy Client ID
- [ ] Generate and copy Client Secret (⚠️ save immediately!)
- [ ] Add redirect URI: `http://localhost:3000/auth/discord/callback`
- [ ] Save changes

**Time:** 10 minutes

### 3. Store Credentials in Rails

- [ ] Open credentials: `bin/rails credentials:edit`
- [ ] Add Discord configuration:
  ```yaml
  discord:
    client_id: "YOUR_CLIENT_ID"
    client_secret: "YOUR_CLIENT_SECRET"
  ```
- [ ] Save and close editor
- [ ] Verify in console: `bin/rails c` then `Rails.application.credentials.discord`

**Time:** 10 minutes

### 4. Verify Setup

- [ ] Run credentials test: `bundle exec rspec spec/config/discord_credentials_spec.rb`
- [ ] All tests pass (green)

**Time:** 5 minutes

### 5. Documentation

- [ ] Review setup guide: `docs/DISCORD_SETUP.md`
- [ ] Bookmark Discord developer portal for future reference

**Time:** 5 minutes

---

## Commands Reference

```bash
# Edit Rails credentials
bin/rails credentials:edit

# Test credentials in console
bin/rails console
> Rails.application.credentials.discord
> exit

# Run Discord credentials test
bundle exec rspec spec/config/discord_credentials_spec.rb

# Run all tests
bin/test
```

---

## Resources

- **Discord Developer Portal:** https://discord.com/developers/applications
- **Setup Guide:** [docs/DISCORD_SETUP.md](../DISCORD_SETUP.md)
- **Credentials Template:** [config/credentials.yml.template](../../config/credentials.yml.template)
- **Discord OAuth Docs:** https://discord.com/developers/docs/topics/oauth2

---

## Troubleshooting

### Can't edit credentials?

```bash
# Ensure master.key exists
cat config/master.key

# If missing, Rails will create it on first edit
bin/rails credentials:edit
```

### Credentials test failing?

- Check credentials format (valid YAML)
- Verify no placeholder values (YOUR_CLIENT_ID, etc.)
- Ensure credentials saved properly
- Restart Rails console if already open

---

## Next Steps

After completing T2.1.1:

- ✅ **T2.1.1:** Create Discord Application ← You are here
- ⏭️ **T2.1.2:** Configure OmniAuth Discord
- ⏭️ **T2.1.3:** Create Users migration and model
- ⏭️ **T2.1.4:** Implement OmniAuth callback controller
- ⏭️ **T2.1.5:** Add Discord login button

---

## Notes

- Keep Client Secret private (never commit to git)
- Use separate apps for development vs production
- OAuth redirect URI must match exactly
- Bot permissions are optional (skip for now)

---

**Ready?** Follow the [DISCORD_SETUP.md](../DISCORD_SETUP.md) guide to complete this task!

*Last Updated: October 27, 2025*
